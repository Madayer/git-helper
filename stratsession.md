## Унифицированная отчетность
Для компании Ростелеком, покрывающую своими услугами всю страну важно, чтобы подход к обслуживанию каждого клиента был на одинаково высоком уровне. Возможным это становиться только тогда, когда все процессы обслуживания унифицированы, операторы работают в единых системах, а контроль осуществляет централизованное направление. Без организации единой унифицированной системы отчётности такой контроль не представляется возможным.

Наше направление работает над реализацией такой системы отчётности. 

Первым шагом при подготовке данных для расчета показателей всегда является источник данных. В своей отчётности мы используем только проверенные источники: или "чистая" реплика непосредственного источника данных, либо регламентированные витрины и СИ в ЦХД. 

Второй шаг это выверенные и регламентированные справочники, позволяющие связать источники и правильно интерпретировать полученную статистику. Нами используются регламентированные справочники из ЦХД, а также справочники собственной разработки, согласованные внутри ЦК. Такие как "справочник скилов", позволяющий структурировать данные по службам, территориям, подрядчикам и т.д., а также уникальная собственная разработка "Справочник по специалистам", позволяющим отслеживать ежедневное состояние оператор всех служб в части изменения данных по их текущей территории, принадлежности к группе, стажу, данным по логинам во всех системах, привязанному наставнику, расписанию плановых отсутствий и т.д. 

Третий шаг это наложение условий на полученные данные из источника, а также расчет метрик. В данной области подход также был унифицирован. При расчете используется подход основанный только на: рекомендации выданные в результате официального аудита, приказа по компании по расчету показателя. Каждый расчет утверждается направлениями методологов и отдельно направлением аналитики, как единственно верный.

В результате этих шагов данные собираются в таблицы, подходящие для проведения анализа и построения BI отчетности. Для сбора и обработки данных используется собственная аналитическая платформа, развернутая на специально выделенном для этой цели со стороны IT сервере в КОП. Этот уникальный подход позволил использовать достаточную выделенную мощность для обработки массивов данных в млрд. строк за секунды. 

На текущий момент реализованы следующие основные BI-отчеты (дашборды), унифицированные по всем территория:

* Отчет по Скрипт-менеджеру
* Отчет по эффективности НСК
* Отчет по вызовам (включая отчет по операторам)
* Отчет по IVR
* Отчет по распределению трафика
* Отчет по Омничату
* Отчет по онлайн-мониторингу ЕРКЦ

А также множество связанных с основными косвенных отчетов (например: по повторным обращениям, исходящим вызовам, предиктивным опросам и т.д.).

Отличительной особенностью дашбордов по вызовам является обновление в режиме онлайн (задержка данных от источника не более 15-ти минут). Это стало возможным благодаря подключению к источникам данных напрямую, минуя ЦХД, срок обновления в котором только за предыдущий день.

Дополнительно необходимо отметить автоматизированные средства предоставления отчетности до конечного пользователя. На текущий момент настроены автоматизированные способы доставки отчетности на почту и/или на сетевое пространство. 

## Подход к разработке отчетности

Централизация отчётности позволила также унифицировать и сам процесс разработки. Единая команда разработки использует:
* Единый сервер для разработки, что позволяет без задержек предоставлять доступ любому члену команды к любым хранимым данным.
* Единые спецификации и карты данных, которые позволяют быть уверенным, что данные будут верно интерпретированы.
* Единое пространство GitLab, позволяющее следить за версионностью разрабатываемых продуктов и структуризацию проделываемой работы и вносимых изменений.
* Единые правила написания кода на всех используемых в разработке языках, что позволяет без проблем заимствовать код внутри команды, корректировать и дополнять код.
* Единое хранилище сниппетов, позволяющее переиспользовать фрагменты кода для значительного ускорения разработки.
* Единый подход к совершенствованию навыков разработки отчетности. Полный отказ от устаревших инструментов работы с данными (excel, vba, power query) в пользу перехода на современные инструменты в области работы с "большими" данными (Apache Superset, JupyterHub, ClickHouse, Apache Airflow и т.д.)

Отдельно важно отметить параллельно решаемую задачу в части реализации проекта компании "Импортозамещение". Для этого на текущий момент подготовлена инфраструктура инструментов отчётности и разработки отчётности полностью состоящего из открытого ПО, не нуждающегося в подписках и лицензиях. При этом развитие open source продуктов происходит гораздо быстрее в связи с участием в доработке разработчиков со всего мира. На текущий момент все новые отчеты и дашборды разрабатываются в иvпортозамещенных инструментах. До конца года планируется вывод всей оставшейся отчетности из Power BI.


## Платформа Parebrick

Для полной работы с данными один только BI-инструмент недостаточен. Нужна понятная карта отчетности, способы коммуникации (новости), конструктор отчётов и т.д. Для объединения этих инструментов в единую экосистему было принято решения о создании платформы Parebrick. 
Как и любой сервис, платформа имеет единую точку входа- стартовую страницу, открытую для всех пользователей РТК. Здесь можно увидеть весь перечень клиентских сервисов, а также сервисов разработки, которые являются частью платформы. Также здесь есть ссылки для обратной связи с командой любым удобным способом, информация о команде и проекте в целом, а также модуль для получения доступов в любой их входящих в систему сервисов.

Коротко познакомимся с каждым из клиентских сервисов:

Superset - BI-инструмент, замена PBI. Ключевой сервис платформы. В нем находятся все  дашборды: верхнеуровневые, операционные а также отчеты для мониторинга. Главной причиной перехода на Superset с PBI стало импортозамещение, но в процессе запуска сервиса и работы с ним выявился ряд неоспоримых преимуществ перед решением от Microsoft. 
1. Т.к. это опен-сорс решение, компания ничего не платит за сам продукт, только за его поддержку собственным IT-специалистам. Мы со своей стороны, как и другие разработчики со всего мира "оплачиваем" использование инструмента своим вкладом в разработку будущих версий. Активно участвуем в жизни продукта на форуме и github.
2. Одним из ключевых преимуществ Superset является его гибкость и расширяемость. Разработчики могут легко настраивать и расширять функциональность с помощью плагинов и интеграции с различными базами данных и инструментами.
3. Также преимущества видны и при масштабировании. Superset cпособен обрабатывать большой объем данных и поддерживает многопользовательский режим, что делает его подходящим для крупных организаций с высоким трафиком.
4. Ещё одним преимуществом явлется гибкая ролевая модель, которая позволяет скрывать от пользователей дашборды, находящиеся в разработке, разделять доступы к дашбордам между службами, что служит отличной защитой данных.

У Superset есть особенность, которую многие считают минусом. Он настроен на работу с готовыми агрегированными таблицами/представлениям. Т.е. если в PBI можно было загрузить все таблицы источника, настроить модель данных и там же строить дашборд, то в Superset модель данных построить не получится.  Но при должной компетенции команды разработчиков, умеющих построить модель данных от источника до представления , используя навыки дата-инжинеринга, такой подход из минуса превращается в плюс. Такие подготовленные таблицы-суперсеты, позволяют в разы увеличить скорость работы дашборда. Пока PBI собирает неагрегированные данные и рассчитывает модель, Superset остается только сформировать визуализации.

Metabase  - помимо работы с агрегированными данными, часто по итогам анализа необходимы детализированные данные для передачи в контроль качества на прослушку или проверку логов по определенным обращениям и т.д.
Для этой функции нами был выбран BI-инструмент Metabase. Он предоставляет пользователям доступ к детализациям в привычном табличном виде. Т.к. metabase является ещё и конструктором отчётов, пользователь может "собрать" отчёт под свои нужды: настроить фильтры, соединить со справочником, убрать лишние столбцы и самое главное сохранить в личную папку свои наработки для последующего использования. Также в инструменте предусмотрен экспорт в excel.

Wiki - важная часть платформы Parebrick, представляющая собой информационный портал по проекту, реализованный на инструменте Quartz. Включает в себя:
- новости по изменениям в отчетности
- Инструкции для пользователей, описывающие работу в инструментах с ответами на частые вопросы.
- Карта отчетность. Перечень всех дашбордов с описанием, а также использующихся в них метрик.

Справочник сотрудников - уникальный инструмент собственной разработки, позволяющий решить множество задач, связанных с отчетностью по персоналу.
- Хранилище всех подробных данных по сотрудникам всех служб ЦК Лояльности, внутренних и внешних в едином формате.
- Описание всего жизненного цикла специалиста от обучения до увольнения.
- Возможность проследить трансферы специалистов между службами.
- Объединение на уровне специалиста всех систем, в которых он работает: CRM, ЦОВ, Чат, Zoom, онлайн-университет.
- Возможность кластеризации сотрудников и любой связанной отчетности по признакам: служба, территория, площадка, ДЗО, опытность, функциональная роль и т.д.
Справочник уже востребован: 
- Службами НСК, УОП, 1ЛТП, МЦ НТТ, VIP
- Контролем качества
- Аналитиками данных

LimeSurvey - гибкий инструмент для создания опросов. Используется площадками для :
- опросов по специалистам
- проведение тестирования при процессе обучения
- заполнения чек-листов при прослушках
Благодаря гибкости настроек вопросов с помощью собственного синтаксиса обладает преимуществами перед готовыми бесплатными аналогами (яндекс, гугл) особенно после закрытия к ним доступа. Результаты опросов записываются в БД сервера, что позволяет строить онлайн-отчёты и дашборды на результатах.

## Планы
Расширение аналитической платформы и её инструментов:
- Продвижение справочника специалистов в смежных службах. Интеграция HR, с целью обогащения воронки по специалистам от отклика на вакансию
- Внедрение нового инструмента для карты данных (Atlas), позволяющий быстро найти описание метрик и связей сущностей как аналитику, так и менеджеру. Аналог Data Governance для людей.
- Разработка аналитических платформ, позволяющих менеджерам без помощи аналитиков оценивать влияние планируемых пилотов на показатели на лету.
- Личный кабинет сотрудника. Логичное продолжение развития после сбора всей сопутствующей отчетности.
Завершение рефакторинга старой отчетности:
- Перевод оставшихся дашбордов на Superset.
- Перевод оставшихся детализированных отчетов в Metabase.
Разработка новой отчётности:
- Подключение онлайн-данных CRM B2C напрямую от источника без задержки. Проект согласован и находится на стадии организации архитектуры сетевого доступа и получения документации по данным
- Сквозные отчеты между источниками. Обращения + вызовы + скрипты.
- История контакта. Совместный проект с эксплуатацией ЕРКЦ. Позволит отслеживать все потоки поступающего трафика, идентифицировать службы и территории.
- 